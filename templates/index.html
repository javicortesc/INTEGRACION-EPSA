<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador Integración Extraportuario - EPSA</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <!-- Podrías añadir un favicon aquí -->
    <!-- <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}"> -->
</head>
<body>
    <header>
        <!-- Si tienes un logo SVG o PNG que sea blanco o adaptable, mejor -->
        <img src="{{ url_for('static', filename='img/logo.png') }}" alt="Puerto San Antonio Logo" id="logo">
        <h1>Integración Extraportuarios – EPSA</h1>
        <p id="app-version">{{ app_version }}</p>
    </header>

    <main>
        <div class="container">
            <h2>Panel de Control Extraportuario</h2>

            <section class="form-section">
                <h3>1. Avisar Camión Listo para Salir</h3>
                <form id="avisoCamionForm">
                    <div>
                        <label for="licencePlate">Patente Camión:</label>
                        <input type="text" id="licencePlate" name="licencePlate" value="AABB11" placeholder="Ej: CCDD22" required>
                    </div>
                    <div>
                        <label for="containerId">ID Contenedor:</label>
                        <input type="text" id="containerId" name="containerId" value="TEST1234567" placeholder="Ej: SUDU1234567" required>
                    </div>
                    <div>
                        <label for="isocode">ISO Code Contenedor (4 car.):</label>
                        <input type="text" id="isocode" name="isocode" value="22G1" placeholder="Ej: 45G1" maxlength="4" required>
                    </div>
                    <button type="submit">Enviar Aviso a EPSA</button>
                </form>
            </section>

            <section class="status-section">
                <h3>2. Estado del Trámite</h3>
                <div id="statusMessages">
                    <p class="status-info">Esperando acciones...</p>
                </div>
                <div id="currentTruckInfo">
                    <h4>Información del Camión Actual:</h4>
                    <p><strong>ID Ingreso:</strong> <span id="currentIngresoId">-</span></p>
                    <p><strong>Patente:</strong> <span id="currentLicencePlate">-</span></p>
                    <p><strong>Contenedor:</strong> <span id="currentContainerId">-</span></p>
                    <p><strong>Estado EPSA:</strong> <span id="currentEpsaStatus">-</span></p>
                    <p><strong>Mensaje EPSA:</strong> <span id="currentEpsaMessage">-</span></p>
                </div>
            </section>

            <section class="actions-section">
                <h3>3. Acciones Post-Autorización</h3>
                <button id="confirmarSalidaBtn" disabled>Confirmar Salida</button>
                <button id="eliminarAvisoBtn" class="secondary" disabled>Eliminar Aviso</button>
            </section>

            <section class="log-section">
                <h3>Log de Eventos</h3>
                <p>Para un seguimiento detallado, revisa la consola de desarrollador de tu navegador (F12 → Pestaña "Consola") y la terminal donde se ejecuta Flask.</p>
            </section>
        </div>
    </main>

    <footer>
        <p>Simulador basado en "Especificación técnica para la integración Extraportuarios – EPSA {{ app_version }}"</p>
    </footer>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>